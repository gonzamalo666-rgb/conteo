-- Tabla de zonas
CREATE TABLE zonas (
  id BIGSERIAL PRIMARY KEY,
  nombre TEXT NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Tabla de mesas
CREATE TABLE mesas (
  id BIGSERIAL PRIMARY KEY,
  numero TEXT NOT NULL,
  zona_id BIGINT REFERENCES zonas(id) ON DELETE CASCADE,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Tabla de partidos
CREATE TABLE partidos (
  id BIGSERIAL PRIMARY KEY,
  nombre TEXT NOT NULL,
  color TEXT NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Tabla de votos
CREATE TABLE votos (
  id BIGSERIAL PRIMARY KEY,
  mesa_id BIGINT REFERENCES mesas(id) ON DELETE CASCADE,
  partido_id BIGINT REFERENCES partidos(id) ON DELETE CASCADE,
  cantidad INTEGER NOT NULL DEFAULT 0,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  UNIQUE(mesa_id, partido_id)
);